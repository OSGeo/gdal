<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>MVT: Mapbox Vector Tiles</title>
</head>

<body>

<h1>MVT: Mapbox Vector Tiles</h1>

<p>Starting with GDAL 2.3, the MVT driver can read Mapbox Vector Tile files,
as standalone files, uncompressed or gzip-compressed (typical extensions are
.pbf, .mvt, .mvt.gz), or a tileset at a given zoom level of such files.</p>

<p>Mapbox Vector Tiles stored within a SQLite container conforming to the
MBTiles format are handled by the <a href="frmt_mbtiles.html">MBTiles</a> driver.</p>

<p>Tilesets of MVT files can for example be generated by
<a href="https://github.com/mapbox/tippecanoe">tippecanoe</a>. The output
file hierarchy will contain a <a href=#metadata_json>metadata.json</a>
file at its root and {z}/{x}/{y}.pbf files with the tiles, where z is the
zoom level and (x, y) the coordinate of the tile in a given zoom level.
The origin of the tiling system is the top-left tile(XYZ convention).
For example, for zoom levels 0 and 1 :</p>

<pre>
/metadata.json
/0/
   0/
     0.pbf
/1/
   0/
     0.pbf
     1.pbf
   1/
     0.pbf
     1.pbf
</pre>

<p>The driver will assume EPSG:3857 (WebMercator) spatial reference system and
Z/X/Y tiling structure, if opening a filename with {Z}/{X}/{Y}.pbf or
{Z}-{X}-{Y}.pbf name, or a zoom level of a tileset. Otherwise integer coodinates
will be reported.</p>

<p>Note: When opening a zoom level of a tileset, the driver will make no effort of
stiching together geometries for features that overlap several tiles.</p>

<h2>Connection strings</h2>

<p>The following connection strings are supported:</p>

<ul>
<li><i>/path/to/some.pbf</i></li>
<li><i>MVT:http[s]://path/to/some.pbf</i></li>
<li><i>/path/to/{Z}</i>: where {Z} is a zoom level between 0 and 30,
tiles are in /path/to/{Z}/{X}/{Y}.pbf files, and /path/to/metadata.json
should typically exist.</li>
<li><i>MVT:http[s]://path/to/{Z]</i></li>
</ul>

<p>The MVT: prefix may be added before the filename or directory name to help
forcing identification of datasets in some rare cases where non-guided
identification would fail.</p>

<h2 id="metadata_json">metadata.json</h2>

<p>This file is typically generated by tippecanoe and has the following
content:</p>

<pre>
{
    "name": "my_layername",
    "description": "my_layername",
    "version": "2",
    "minzoom": "0",
    "maxzoom": "0",
    "center": "2.500000,49.500000,0",
    "bounds": "2.000000,49.000000,3.000000,50.000000",
    "type": "overlay",
    "format": "pbf",
    "json": "{
        \"vector_layers\": [ {
            \"id\": \"my_layername\",
            \"description\": \"\",
            \"minzoom\": 0,
            \"maxzoom\": 0,
            \"fields\": {
                \"bool_false\": \"Boolean\",
                \"bool_true\": \"Boolean\",
                \"float_value\": \"Number\",
                \"pos_int_value\": \"Number\",
                \"pos_int64_value\": \"Number\",
                \"neg_int_value\": \"Number\",
                \"neg_int64_value\": \"Number\",
                \"pos_sint_value\": \"Number\",
                \"pos_sint64_value\": \"Number\",
                \"neg_sint_value\": \"Number\",
                \"neg_sint64_value\": \"Number\",
                \"real_value\": \"Number\",
                \"string_value\": \"String\",
                \"uint_value\": \"Number\",
                \"uint64_value\": \"Number\"
            }
        } ],
        \"tilestats\": {
            \"layerCount\": 1,
            \"layers\": [
                {
                \"layer\": \"my_layername\",
                \"count\": 2,
                \"geometry\": \"Point\",
                \"attributeCount\": 0,
                \"attributes\": []
                }
            ]
        }
    }}"
}
</pre>

<p>The MVT driver only uses the "json" key to retrieve the layer names,
their fields and the geometry type, and the "bounds" key for the layer extent.
</p>

<p>If this file cannot be found, the layer schema is established by
scanning the features of the tile(s).</p>

<h2>Opening options</h2>

The following open options are available:
<ul>
<li><b>X</b>=int_value: X coordinate of the EPSG:3857 tile.</li>
<li><b>Y</b>=int_value: Y coordinate of the EPSG:3857 tile.</li>
<li><b>Z</b>=int_value: Z coordinate of the EPSG:3857 tile.</li>
<li><b>METADATA_FILE</b>=filename: Filename of a metadata.json-like file.
If opening a /path/to/{Z}/{X}/{Y}.pbf file, the driver will by default try to
find /path/to/metadata.json. Setting the value to the empty string is a way
of avoid the metadata.json file to be used.</li>
<li><b>CLIP</b>=YES/NO: Whether to clip geometries of vector features to tile extent.
Generators of vector files will typically create geometries with a small buffer
beyond the tile extent so that geometries intersecting several tiles can be
unioned back. Defaults to YES so that that buffer is removed and geometries are
clipped exactly to the tile extent.</li>
<li><b>TILE_EXTENSION</b>=string: For tilesets, extension of tiles. Defaults
to pbf.</li>
<li><b>TILE_COUNT_TO_ESTABLISH_FEATURE_DEFN</b>=int_value: For tilesets without
metadata file, maximum number of tiles to use to establish the layer schemas.
Defaults to 1000.</li>
<lib><b>JSON_FIELD</b>=YES/NO: For tilesets, whether to put all attributes as a
serialized JSon dictionary.</li>
</ul>

<h2>Examples</h2>

<pre>
ogrinfo MVT:https://free.tilehosting.com/data/v3/1 -oo tile_extension="pbf.pict?key=${YOUR_KEY}" --debug on -oo metadata_file="https://free.tilehosting.com/data/v3.json?key=${YOUR_KEY}"
</pre>

<p>See Also:</p>

<ul>
<li><a href="https://github.com/mapbox/vector-tile-spec">
Mapbox Vector Tile Specification</a></li>
<li><a href="frmt_mbtiles.html">MBTiles</a> driver</li>
<li><a href="https://github.com/mapbox/tippecanoe">tippecanoe</a>:
Builds vector tilesets from large (or small) collections of GeoJSON, Geobuf,
or CSV features</li>
<li><a href="https://github.com/mapbox/awesome-vector-tiles">Links to tools
dealing with Mapbox Vector Tiles</a></li>
</ul>

</body>
</html>
